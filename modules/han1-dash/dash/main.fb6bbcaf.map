{"version":3,"sources":["js/main.js"],"names":["window","ProgressBar","mainMenu","init","document","addEventListener","e","keyCode","handleMainMenuToggle","call","BTN","loading","loadingScreen","text","metersOptions","activeMeterOpts","color","strokeWidth","trailColor","trailWidth","value","className","style","autoStyleContainer","svgStyle","display","width","ampsMetersOpts","voltMetersOpts","voltsMax","ampsMax","ampsAlot","maxWatts","animationOpts","duration","easing","sColors","error","fine","warning","mainSocket","io","connect","errorSocket","on","console","dir","lastUpdate","all","activePower","activeWmeter","SemiCircle","querySelector","trail","classList","add","removeAttribute","path","setAttribute","l1","il1Meter","vl1Meter","l2","il2Meter","vl2Meter","l3","il3Meter","vl3Meter","meters","forEach","meter","animate","setTimeout","enable","disable","frmSrv","lastPrice","data","listID","manufacturer","rest","isActive","log","workThePrice","activePowerMeterUpdate","aPowPlus","currentMetersUpdate","phases","i","voltageMetersUpdate","v","date","Date","time","textContent","toLocaleDateString","toLocaleTimeString","price","current","today","tomorrow","days","cont","length","map","getAvgAndHighHours","innerText","str","day","idx","dayStr","getTotals","arr","total","reducer","acc","curr","getHighHours","avg","hour","getHours","d","startsAt","totalOnDay","reduce","avgOnDayBC","avgOnDay","round","highHoursOnDay","bind","filter","Boolean","avgOnDayStr","avgBf","highHours","decimals","Number","Math","pack","unit","parseInt","setText","toFixed"],"mappings":"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","file":"main.fb6bbcaf.map","sourceRoot":"../../../src","sourcesContent":["import ProgressBar from 'progressbar.js';\nimport loadingScreen from './modules/loadingScreen';\nimport {\n  mainMenu\n} from './modules/_mainMenu';\n\n\nwindow.ProgressBar = ProgressBar;\n\n\nmainMenu.init();\n\ndocument.addEventListener('keyup', (e) => {\n  if (e.keyCode === 77) {\n    mainMenu.handleMainMenuToggle.call(mainMenu.BTN, e);\n  }\n})\n\nconst loading = new loadingScreen({\n  text: 'Waiting for data!'\n})\n\nconst metersOptions = {\n  activeMeterOpts: {\n    color: '#ffffff',\n    strokeWidth: 4,\n    trailColor: null,\n    trailWidth: 0.8,\n    text: {\n      value: 'Active Power',\n      className: 'activePowerLabel',\n      style: {\n        autoStyleContainer: false,\n      }\n    },\n    svgStyle: {\n      display: 'block',\n      width: '100%'\n    },\n  },\n  ampsMetersOpts: {\n    color: '#ffffff',\n    strokeWidth: 4,\n    trailColor: null,\n    trailWidth: 0.8,\n    text: {\n      value: 'Current',\n      className: 'phaseVal phaseMeter__current',\n      style: {\n        autoStyleContainer: false,\n      }\n    },\n    svgStyle: {\n      display: 'block',\n      width: '100%'\n    },\n  },\n  voltMetersOpts: {\n    color: '#ffffff',\n    strokeWidth: 4,\n    trailColor: null,\n    trailWidth: 0.8,\n    text: {\n      value: 'Voltage',\n      className: 'phaseVal phaseMeter__voltage',\n      style: {\n        autoStyleContainer: false,\n      }\n    },\n    svgStyle: {\n      display: 'block',\n      width: '100%'\n    },\n  },\n  voltsMax: 250,\n  ampsMax: 50,\n  ampsAlot: 15,\n  maxWatts: 10000,\n  animationOpts: {\n    duration: 1200,\n    easing: 'easeOut',\n  },\n  sColors: {\n    error: 'rgb(255, 90, 82)',\n    fine: 'rgb(82, 194, 43)',\n    warning: 'rgb(255, 135, 0)',\n  }\n}\n\n\n\n\nconst mainSocket = io.connect('/main');\nconst errorSocket = io.connect('/error');\n\nwindow.mainSocket = mainSocket;\nwindow.errorSocket = errorSocket;\n\nerrorSocket.on('error', (e) => {\n  console.dir(e);\n})\n\n\nlet lastUpdate = document.all.lastUpdate;\nlet activePower = document.all.activePower;\n\nlet activeWmeter = new ProgressBar.SemiCircle(activePower.querySelector('.meter'), metersOptions.activeMeterOpts);\nactiveWmeter.trail.classList.add('meterTrail')\nactiveWmeter.text.removeAttribute('style');\nactiveWmeter.path.classList.add('meterGauge')\nactiveWmeter.path.setAttribute('stroke-linecap', 'round')\n\n\nlet l1 = document.all.l1;\nlet il1Meter = new ProgressBar.SemiCircle(l1.querySelector('.current'), metersOptions.ampsMetersOpts);\nil1Meter.trail.classList.add('meterTrail');\nil1Meter.path.setAttribute('stroke-linecap', 'round');\nil1Meter.path.classList.add('meterGauge')\nil1Meter.text.removeAttribute('style');\nlet vl1Meter = new ProgressBar.SemiCircle(l1.querySelector('.volt'), metersOptions.voltMetersOpts);\nvl1Meter.trail.classList.add('meterTrail');\nvl1Meter.path.setAttribute('stroke-linecap', 'round');\nvl1Meter.path.classList.add('meterGauge')\nvl1Meter.text.removeAttribute('style');\n\n\nlet l2 = document.all.l2;\nlet il2Meter = new ProgressBar.SemiCircle(l2.querySelector('.current'), metersOptions.ampsMetersOpts);\nil2Meter.trail.classList.add('meterTrail')\nil2Meter.path.classList.add('meterGauge')\nil2Meter.path.setAttribute('stroke-linecap', 'round')\nil2Meter.text.removeAttribute('style');\n\nlet vl2Meter = new ProgressBar.SemiCircle(l2.querySelector('.volt'), metersOptions.voltMetersOpts);\nvl2Meter.trail.classList.add('meterTrail')\nvl2Meter.path.classList.add('meterGauge')\nvl2Meter.path.setAttribute('stroke-linecap', 'round')\nvl2Meter.text.removeAttribute('style');\n\nlet l3 = document.all.l3;\nlet il3Meter = new ProgressBar.SemiCircle(l3.querySelector('.current'), metersOptions.ampsMetersOpts);\nil3Meter.trail.classList.add('meterTrail')\nil3Meter.path.classList.add('meterGauge')\nil3Meter.path.setAttribute('stroke-linecap', 'round')\nil3Meter.text.removeAttribute('style');\n\nlet vl3Meter = new ProgressBar.SemiCircle(l3.querySelector('.volt'), metersOptions.voltMetersOpts);\nvl3Meter.trail.classList.add('meterTrail')\nvl3Meter.path.classList.add('meterGauge')\nvl3Meter.path.setAttribute('stroke-linecap', 'round')\nvl3Meter.text.removeAttribute('style');\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const meters = [activeWmeter, il1Meter, vl1Meter, il2Meter, vl2Meter, il3Meter, vl3Meter];\n\n  meters.forEach(meter => {\n    meter.animate(1, metersOptions.animationOpts);\n    setTimeout(() => {\n      meter.animate(0, metersOptions.animationOpts);\n    }, 1000);\n  })\n})\n\n\nmainSocket.on('disconnect', function () {\n  loading.enable('Lost Connection')\n});\n\nmainSocket.on('reconnect', function () {\n  loading.disable()\n});\n\nmainSocket.on('meterData', (frmSrv, lastPrice) => {\n  const {\n    data,\n    meter,\n    listID,\n    manufacturer,\n    ...rest\n  } = frmSrv;\n\n  if (loading.isActive) {\n    loading.disable();\n  }\n\n  console.log(frmSrv);\n\n  workThePrice(lastPrice);\n\n  if (listID === 1 || listID === 2 || listID === 3) {\n    // Update the activePowerMeter on every list!\n    activePowerMeterUpdate.call(activeWmeter, data.aPowPlus, manufacturer)\n  }\n\n  if (listID === 2 || listID === 3) {\n    currentMetersUpdate.call(il1Meter, data.phases.l1.i, manufacturer);\n    currentMetersUpdate.call(il2Meter, data.phases.l2.i, manufacturer);\n    currentMetersUpdate.call(il3Meter, data.phases.l3.i, manufacturer);\n\n    voltageMetersUpdate.call(vl1Meter, data.phases.l1.v, manufacturer)\n    voltageMetersUpdate.call(vl2Meter, data.phases.l2.v, manufacturer)\n    voltageMetersUpdate.call(vl3Meter, data.phases.l3.v, manufacturer)\n\n\n    const date = new Date(data.time);\n\n\n    lastUpdate.querySelector('h4').textContent = `${date.toLocaleDateString()} ${date.toLocaleTimeString()}`;\n    // `${data.date.date}/${data.date.month}/${data.date.year}\\n${data.date.hour}:${data.date.min}:${data.date.sec}`\n  }\n  if (listID === 3) {\n\n  }\n})\n\n\nfunction workThePrice(price) {\n  const {\n    current,\n    today,\n    tomorrow\n  } = price;\n  let days;\n\n  const cont = document.querySelector('.priceInfo')\n\n  if (today.length && tomorrow.length) {\n    days = [today, tomorrow].map(getAvgAndHighHours);\n    cont.innerText = `${days[0].str}\n    ${days[1].str}`;\n  } else if (today.length) {\n    days = [today].map(getAvgAndHighHours);\n    cont.innerText = days[0].str;\n  }\n\n\n\n}\n\nfunction getAvgAndHighHours(day, idx) {\n  let dayStr = idx === 0 ? 'Today' : 'Tomorrow';\n\n  const getTotals = (time, idx, arr) => time.total;\n  const reducer = (acc, curr, idx, arr) => acc + curr;\n  const getHighHours = (avg, hour, idx, arr) => hour.total > avg ? hour : null;\n  const getHours = (hour) => {\n    let d = new Date(hour.startsAt);\n    return d.getHours()\n  }\n\n  const totalOnDay = day.map(getTotals).reduce(reducer);\n  const avgOnDayBC = (totalOnDay / day.length)\n  const avgOnDay = round((avgOnDayBC * 100), 2);\n  const highHoursOnDay = day.map(getHighHours.bind(null, avgOnDayBC)).filter(Boolean).map(getHours);\n  const avgOnDayStr = `${dayStr}: ${avgOnDay} øre`;\n\n  return {\n    avg: avgOnDay,\n    avgBf: avgOnDayBC,\n    str: avgOnDayStr,\n    highHours: highHoursOnDay\n  }\n}\n\n\nfunction round(value, decimals) {\n  return Number(Math.round(value + 'e' + decimals) + 'e-' + decimals);\n}\n\nfunction currentMetersUpdate(pack, manufacturer) {\n  let {\n    value,\n    unit\n  } = pack;\n\n  if (manufacturer === 'kamstrup') {\n    value = value\n  } else {\n    value = value * 100;\n  }\n\n  value = parseInt(value) / 100\n\n  this.animate(value / metersOptions.ampsMax, metersOptions.animationOpts);\n  this.setText(`${value.toFixed(2)} A`)\n  if (value > 0 && value < metersOptions.ampsAlot) {\n    this.path.setAttribute('stroke', metersOptions.sColors.fine)\n  }\n  if (value > metersOptions.ampsAlot && value < 25) {\n    this.path.setAttribute('stroke', metersOptions.sColors.warning)\n  }\n  if (value > 25 && value < metersOptions.ampsMax) {\n    this.path.setAttribute('stroke', metersOptions.sColors.error)\n  }\n}\n\nfunction voltageMetersUpdate(pack, manufacturer) {\n  let {\n    value,\n    unit\n  } = pack;\n\n  this.animate(value / metersOptions.voltsMax, metersOptions.animationOpts);\n  this.setText(`${value} V`)\n  if (value > 220 && value < 240) {\n    this.path.setAttribute('stroke', metersOptions.sColors.fine)\n  }\n  if (value < 220 &&\n    value > 240) {\n    this.path.setAttribute('stroke', metersOptions.sColors.error)\n  }\n}\n\nfunction activePowerMeterUpdate(pack, manufacturer) {\n  let {\n    value,\n    unit\n  } = pack;\n\n  this.animate((value / metersOptions.maxWatts), metersOptions.animationOpts);\n  this.setText(`${(value / 1000).toFixed(3)} kW`)\n  if (value > 0 && value < 5000) {\n    this.path.setAttribute('stroke', metersOptions.sColors.fine)\n  }\n  if (value > 5000 && value < 8000) {\n    this.path.setAttribute('stroke', metersOptions.sColors.warning)\n  }\n  if (value > 8000 && value < metersOptions.maxWatts) {\n    this.path.setAttribute('stroke', metersOptions.sColors.error)\n  }\n}\n"]}